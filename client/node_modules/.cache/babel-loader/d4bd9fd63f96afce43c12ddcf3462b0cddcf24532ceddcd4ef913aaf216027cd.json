{"ast":null,"code":"var _jsxFileName = \"/home/suman/Desktop/redux_auth/client/src/features/auth/Login.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useRef, useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { setCredentials } from './authSlice';\nimport { useLoginMutation } from './authApiSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const userRef = useRef();\n  const errRef = useRef();\n  const [user, setUser] = useState('');\n  const [pwd, setPwd] = useState('');\n  const [errMsg, setErrMsg] = useState('');\n  const navigate = useNavigate();\n  const [login, {\n    isLoading\n  }] = useLoginMutation();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    userRef.current.focus();\n  }, []);\n  useEffect(() => {\n    setErrMsg('');\n  }, [user, pwd]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const userData = await login({\n        user,\n        pwd\n      }).unwrap();\n      dispatch(setCredentials({\n        ...userData,\n        user\n      }));\n      setUser('');\n      setPwd('');\n      navigate('/welcome');\n    } catch (err) {\n      var _err$response, _err$response2;\n      if (!(err !== null && err !== void 0 && err.response)) {\n        setErrMsg('No server response');\n      } else if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 400) {\n        setErrMsg('Missing username or password');\n      } else if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401) {\n        setErrMsg('Unauthorized');\n      } else {\n        setErrMsg('Login failed');\n      }\n      errRef.current.focus();\n    }\n  };\n  const handleUserInput = e => setUser(e.target.value);\n  const handlePwdInput = e => setPwd(e.target.value);\n  const content = isLoading ? /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading.....\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 30\n  }, this) : /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"login\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      ref: errRef,\n      className: errMsg ? \"errmsg\" : \"offscreen\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      class: \"max-w-sm mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"username\",\n          class: \"block mb-2 text-sm font-medium text-gray-900 dark:text-white\",\n          children: \"username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"username\",\n          ref: userRef,\n          value: user,\n          onChange: handleUserInput,\n          class: \"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",\n          placeholder: \"username\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"mb-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"password\",\n          class: \"block mb-2 text-sm font-medium text-gray-900 dark:text-white\",\n          children: \"Your password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          onChange: handlePwdInput,\n          value: pwd,\n          class: \"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        class: \"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n  return content;\n};\n_s(Login, \"T+psR5tXrro3KkaMIdzDmzGw1U0=\", false, function () {\n  return [useNavigate, useLoginMutation, useDispatch];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useRef","useState","useEffect","useNavigate","useDispatch","setCredentials","useLoginMutation","jsxDEV","_jsxDEV","Login","_s","userRef","errRef","user","setUser","pwd","setPwd","errMsg","setErrMsg","navigate","login","isLoading","dispatch","current","focus","handleSubmit","e","preventDefault","userData","unwrap","err","_err$response","_err$response2","response","status","handleUserInput","target","value","handlePwdInput","content","children","fileName","_jsxFileName","lineNumber","columnNumber","className","ref","onSubmit","class","for","type","id","onChange","placeholder","required","_c","$RefreshReg$"],"sources":["/home/suman/Desktop/redux_auth/client/src/features/auth/Login.js"],"sourcesContent":["import React from 'react'\nimport {useRef,useState,useEffect} from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { useDispatch } from 'react-redux'\nimport { setCredentials } from './authSlice'\nimport { useLoginMutation } from './authApiSlice'\n\nconst Login = () => {\n    const userRef=useRef()\n    const errRef=useRef()\n    const [user,setUser]=useState('')\n    const [pwd,setPwd]=useState('')\n    const [errMsg,setErrMsg]=useState('')\n    const navigate=useNavigate()\n\n    const [login,{isLoading}]=useLoginMutation()\n    const dispatch=useDispatch()\n\n    useEffect(()=>{\n        userRef.current.focus()\n    },[])\n    \n    useEffect(()=>{\n        setErrMsg('')\n    },[user,pwd])\n   \n     const handleSubmit=async (e)=>{\n        e.preventDefault()\n\n        try{\n            const userData=await login({user,pwd}).unwrap()\n            dispatch(setCredentials({...userData,user})) \n            setUser('')\n            setPwd('')\n            navigate('/welcome')\n        }catch(err){\n            if(!err?.response){\n                setErrMsg('No server response');\n            } else if(err.response?.status===400){\n                setErrMsg('Missing username or password');\n            } else if(err.response?.status===401){\n                setErrMsg('Unauthorized');\n            } else {\n                setErrMsg('Login failed');\n            }\n            errRef.current.focus();\n\n        }\n     }\n\n     const handleUserInput=(e)=>setUser(e.target.value)\n     const handlePwdInput=(e)=>setPwd(e.target.value)\n\n\n     const content=isLoading?<h1>Loading.....</h1>:\n     (\n        <section className=\"login\">\n    <p ref={errRef} className={errMsg ? \"errmsg\":\"offscreen\"}></p>\n\n<form onSubmit={handleSubmit} class=\"max-w-sm mx-auto\">\n  <div class=\"mb-5\">\n    <label for=\"username\" class=\"block mb-2 text-sm font-medium text-gray-900 dark:text-white\">username</label>\n    <input type=\"text\" id=\"username\" ref={userRef}  value={user} onChange={handleUserInput} class=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\" placeholder=\"username\" required />\n  </div>\n  <div class=\"mb-5\">\n    <label for=\"password\" class=\"block mb-2 text-sm font-medium text-gray-900 dark:text-white\">Your password</label>\n    <input type=\"password\" id=\"password\" onChange={handlePwdInput} value={pwd} class=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\" required />\n  </div>\n  <button type=\"submit\" class=\"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\">Submit</button>\n</form>\n\n</section>\n     )\n\n  return content\n}\n\nexport default Login"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}